# Настройка кук для обхода ограничений YouTube

YouTube блокирует доступ к контенту с возрастными ограничениями без авторизации. Этот документ описывает как настроить куки для обхода ограничений.

## ⚠️ Важно для Docker

Сервис в Docker не имеет доступа к браузерам. Куки нужно извлекать ЛОКАЛЬНО и передавать в конфигурацию.

## Способы настройки кук

### 1. Файл кук (рекомендуется для Docker)

```yaml
cookies:
  enabled: true
  cookie_file: "/path/to/cookies.txt"
```

**Создание файла кук:**
```bash
# Локально на машине с браузером
yt-dlp --cookies-from-browser safari --cookies cookies.txt --no-download --simulate https://youtube.com
```

### 2. Строка кук

```yaml
cookies:
  enabled: true
  cookie_string: "LOGIN_INFO=...; SID=...; SAPISID=..."
```

**Получение строки кук:**
```bash
# Локально на машине с браузером
python3 extract_cookies.py safari
```

### 3. Отдельные куки

```yaml
cookies:
  enabled: true
  manual_cookies:
    LOGIN_INFO: "значение"
    SID: "значение"
    SAPISID: "значение"
```

## Workflow для Docker

1. **Локально:** Извлеките куки одним из способов выше
2. **На сервере:** Добавьте куки в config.yaml
3. **Перезапуск:** Перезапустите Docker контейнер

## Диагностика

При включенном логировании уровня DEBUG вы увидите:
- Количество загруженных кук
- Наличие важных YouTube кук
- Превью cookie заголовка

```yaml
logging:
  level: "DEBUG"
```

## Безопасность

- Куки содержат личные данные - не публикуйте их
- Регулярно обновляйте куки (раз в месяц)
- Храните файлы кук в безопасном месте